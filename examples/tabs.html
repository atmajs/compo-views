<!doctype html>
<html>
	<head>
		<script src='../bower_components/maskjs/lib/mask.js'></script>
		<script src='../bower_components/ruta/lib/ruta.js'></script>
		<script src='../lib/views.js'></script>

	</head>
	<body>
		<script type='text/mask' data-run='auto'>
			h1 > 'Simple sync switch'
			ViewManager #sync {
				View route='/one' default {
					b style='background: green' > 'One'
				}
				View route='/two' {
					em style='background: red' > 'Two'
				}
			}
			slot showView (e) {
				var url = e.target.dataset.route;
				var id = e.target.dataset.view;
				app.find('#' + id).navigate(url);
			}
			slot navigateView (e) {
				var route = e.target.dataset.route;
				ruta.navigate(route)
			}
			section .show {
				tt > 'Show via direct fn call:'
				button x-tap='showView' data-route='/one' data-view='sync' > 'One';
				button x-tap='showView' data-route='/two' data-view='sync' > 'Two';
			}
			section .navigate {
				tt > 'Show via route navigation:'
				button x-tap='navigateView' data-route='/one' > 'One';
				button x-tap='navigateView' data-route='/two' > 'Two';
			}
			hr;

			h1 > 'Async switch'


			let AsyncOne {
				function onRenderStart () {
					var self = this;
					return mask.class.Deferred.run(function(resolve){
						setTimeout(function(){
							self.nodes = mask.parse("b style='background: green' > 'One'");
							resolve();
						}, 1000)
					})
				}
			}
			let AsyncTwo {
				function onRenderStart () {
					var self = this;
					return mask.class.Deferred.run(function(resolve){
						setTimeout(function(){
							self.nodes = mask.parse("em style='background: red' > 'Two'");
							resolve();
						}, 1000)
					})
				}
			}

			ViewManager #async {
				View route='/async-one' default {
					AsyncOne;
				}
				View route='/async-two' {
					AsyncTwo;
				}
			}
			section .show {
				tt > 'Show via direct fn call:'
				button x-tap='showView' data-route='/async-one' data-view='async' > 'One';
				button x-tap='showView' data-route='/async-two' data-view='async' > 'Two';
			}




		</script>
	</body>
</html>